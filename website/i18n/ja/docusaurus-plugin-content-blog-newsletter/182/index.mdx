---
slug: /182
title: "This Week In React #182: v18.3, useDeferredValue, Next.js, DevTools, Zustand, CSS-in-JS, R19, Remix, Jest, XState, Astro, RNSC, Strict DOM, 3D, Metro, Worklets, TC39, TypeScript, Effect, Rspack, GraphQL..."
authors: [slorber, bndkt]
date: 04-17-2024
---

みなさん、こんにちは！

今週は素晴らしいNext.jsのリリースと、興味深いコミュニティブログ記事が多数あります。

ReactコアチームがReact 19の最終調整に尽力している様子も感じられます。予想外にも、追加の警告を含むv18.3が計画されています。React Native 0.74も間もなくリリースされるでしょう。

今週は[**ECMAScript News**](https://ecmascript.news/?utm_source=thisweekinreact)を紹介したいと思います。ES、TC39、JSツール、ランタイムの最新情報を追うのに私が最も愛用しているニュースレターです。

来週はパリで[React Connection](https://reactconnection.io/)と[React Native Connection](https://reactnativeconnection.io/)カンファレンスが開催されます。参加される方は現地でお会いしましょう👋。私のパートナーコード「TWIR」で[-20%割引](https://www.billetweb.fr/react-connection-2024?discount=TWIR)がまだ利用可能です。

<!-- truncate -->

**💡 [このニュースレターをTwitterでチェック](https://slo.im/thread) - ビジュアルフォーマット🎨**

***

import Support from "@site/newsletter/_support.mdx";

<Support />

***

## 💸 Sponsor {#sponsor1}

[![React-admin: B2Bアプリ向けオープンソースフレームワーク](/emails/issues/182/marmelab.jpg)](https://marmelab.com/react-admin/)

**[React-admin: B2Bアプリ向けオープンソースフレームワーク](https://marmelab.com/react-admin/)**

25,000社以上の企業で採用されているReact-adminは、Reactを使ったERP、内部ツール、B2Bアプリ構築の代表的なフレームワークです。試すべき3つの理由：

1️⃣ **迅速な開発** 🏎️🏁 170以上のフックとコンポーネントライブラリを備え、反復的なCRUD操作ではなくアプリの独自性に集中できます。

2️⃣ **カスタマイズ性と拡張性** ✨💫 ヘッドレスコアを基盤としており、アプリの外観や操作性を完全にカスタマイズ可能。カスタムロジックが必要な時も邪魔しません。

3️⃣ **組み込みのベストプラクティス** 🤓 データ取得、パフォーマンス、フォーム処理、セキュリティにおける7年間のベストプラクティスが統合されており、堅牢で快適な開発者体験を提供します。

何より無料で、APIとシームレスに連携可能（[SSO税](https://sso.tax/)なし）。[**今すぐ試す**](https://marmelab.com/react-admin/) 😉

***

## ⚛️ React {#react}

[![Next.js 14.2](/emails/issues/182/next14.2.jpg)](https://nextjs.org/blog/next-14-2)

[**Next.js 14.2**](https://nextjs.org/blog/next-14-2)

React 19とNext.js 15を待つ間、このマイナーバージョンには開発、本番、キャッシュの改善が含まれています。主なハイライトは：

* Turbopack（RC）: `next dev --turbo`で99.8%のテストが通過
* ビルド/本番環境の改善: メモリ使用量の削減
* キャッシュ改善: `staleTimes`によるクライアントサイドキャッシュの再検証設定可能に
* エラーDX: ハイドレーションミスマッチメッセージの改善

Next.jsですでに素晴らしいReactハイドレーションミスマッチエラーダイアログが実装されているのを見て興奮しています！これを書いている時点で、Turbopackは開発用途で99.9%準備完了（残り6つの統合テスト）。ビルド用途では75%の準備が整っているため、もう少し待つ必要があります。

***

* 💸 [Clerk - A complete suite of embeddable UIs, flexible APIs, and admin dashboards to authenticate and manage your users.](https://go.clerk.com/JTqLYDZ)
* 👀 [React Core - Upcoming v18.3 release](https://github.com/facebook/react/pull/28843): The React team has finally decided to release a v18 minor version. It should not contain any behavior change but will emit new warnings for deprecated features to help us upgrade to React 19. It should warn us when using string refs, defaultProps on FC/memo components, or when spreading a key prop (🐦 [preview](https://twitter.com/sebastienlorber/status/1780519349247205589)).
* 👀 [React Core - useDeferredValue’s `initialValue`](https://github.com/reactjs/react.dev/pull/6747): In upcoming React 19 canary releases, this hook will take a new 2nd argument affecting the initial render. It will return the `initialValue` on initial render, and schedule a re-render in the background with the `value` returned.
* 👀 [React Core - Automatically reset forms after action finishes](https://github.com/facebook/react/pull/28804): This new React 19 behavior only affects uncontrolled inputs, and aligns with the native platform behavior (it will now be the same with/without JS). It will only affect uncontrolled inputs. They also added a new public API [DOM.requestFormReset](https://github.com/facebook/react/pull/28809) so that form abstraction authors can implement this behavior too.
* 👀 [React Core - DevTools v5.1](https://github.com/facebook/react/pull/28840)
* 👀 [React Core - Document new react-reconciler methods](https://github.com/facebook/react/pull/28750)
* 🗓 [React Summit](https://reactsummit.com/?utm_source=thisweekinreact) - 🇳🇱 Amsterdam - 14-18 June - Get a 10% discount with code "TWIR". Awesome lineup including Evan Bacon, Kent C. Dodds, Theo, Tim Neutkens, Mark Erikson, Fred Schott and so many others!
* 📜 [Zustand and React Context](https://tkdodo.eu/blog/zustand-and-react-context): I cannot agree more with Dominik that suggests putting your Zustand store instance in a React context. This way, you can initialize the store from props, make things easier to test, and allow using a store on multiple subtrees.
* 📜 [CSS in React Server Components](https://www.joshwcomeau.com/react/css-in-rsc/): Josh explains why Styled-Components/Emotion do not play well with RSC, and presents alternative solutions providing a similar styled API, like Linaria, Panda, or Pigment. Avoid FOMO, there's no need to adopt RSCs and these libraries now if your app already works fine.
* 📜 [R19, a dead-simple React 19 framework - Part 2 - The Code; How it works under the hood!](https://www.cmrg.me/blog/rsc-part-2-the-code): Great technical deep dive into what it takes to create a custom React 19 / RSC / Server Actions setup on top of Bun.
* 📜 [Rebuilding "Remix Contacts" in Next.js 14 with Transitions, Server Actions and Prisma](https://aurorascharff.no/posts/rebuilding-remix-contacts-in-nextjs-14-with-transitions-server-actions-and-prisma/): A nicely detailed walkthrough of converting an official Remix tutorial app to Next.js while preserving the progressive enhancement behavior. It also explains the differences between the 2 approaches and lists the pros/cons of each implementation. There’s no clear winner, although Remix looks quite competitive!
* 📜 [The Two-Tree Problem with Styling on the Web](https://danielnagy.me/posts/Post_jt4adn0o5bnr): An interesting read on the DOM/CSS tree separation, and whether React CSS-in-JS or Tailwind solves this problem. The author is pro-inline-style (like me BTW).
* 📜 [Improving our Jest execution time by 300%](https://www.camggould.com/posts/Jest-With-RTL-Is-Slow/): Investigations of Jest execution time on a React codebase. RTL getByRole was a bottleneck, among other things.
* 📜 [Empathetic Coding - Button Component](https://react-japan.dev/en/blog/empathetic-coding-button-component): Nice article showing the steps to design a React button component using TypeScript and Tailwind, keeping in mind maintenance and convenience.
* 📜 [Overcoming Next.js' Search Params Limitation in Layouts](https://www.nico.fyi/blog/workaround-layout-has-no-search-params): Suggest using parallel routes to overcome the limitation.
* 📜 [The process.env frontend time bomb (plus: a sustainable definition of “fixed”)](https://massimilianomirra.com/notes/the-frontend-process-env-time-bomb-plus-a-sustainable-definition-of-fixed): Instead of spreading process.env across your codebase, parses env variables with Zod and exposes app config in a React context.
* 📜 [How to Style a React Application](https://alexkondov.com/full-stack-tao-styling/)
* 📜 [Understanding Layout and Template Next.js App Router](https://www.nico.fyi/blog/understanding-layout-and-template-next-app-router)
* 📦 [Next.js View Transitions](https://next-view-transitions.vercel.app/): Shu from Vercel released a basic userland implementation of CSS View Transitions, although it looks possible that Next.js will provide this feature later.
* 📦 [XState Store](https://stately.ai/blog/2024-04-10-xstate-store): New tiny typesafe event-driven state manager, including a React useSelector API. This reminds me a bit of both Redux and Zustand.
* 📦 [Astro 4.6 - Manual i18n routing, move dev toolbar, CSRF protection, cookies…](https://astro.build/blog/astro-460/)
* 📦 [Next-Video 1.0 - The easiest way to add video in your NextJS app](https://github.com/muxinc/next-video/releases/tag/v1.0.0)
* 📦 [Mantine 7.8.0 - Uncontrolled form mode, form.getValues, form.watch, automatic px to rem conversions](https://mantine.dev/changelog/7-8-0/)
* 📦 [NextUI 2.3 - Date/Time/Calendar components](https://nextui.org/blog/v2.3.0)
* 🎥[Theo - From 0 to Production - The Modern React Tutorial (RSCs, Next.js, Shadui, Drizzle, TS and more)](https://www.youtube.com/watch?v=d5x0JCZbAJs)
* 🎥 [React Paris 2024 - Conf Talks YouTube Playlist](https://www.youtube.com/playlist?list=PL53Z0yyYnpWhUzgvr2Nys3kZBBLcY0TA7)
* 🎥 [Ryan Toronto - Handling RSC Errors in Next.js](https://www.youtube.com/watch?v=idEL0dv2V1A)

<SubscribeFormEmbed placement="middle" />

***

## 💸 Sponsor {#sponsor2}

[![React向けFormBuilder SDK](/emails/issues/171/tripetto.jpg)](https://tripetto.com/sdk/this-week-in-react/?utm_source=thisweekinreact\&utm_medium=sponsor\&utm_campaign=sdk)

**[React向けFormBuilder SDK](https://tripetto.com/sdk/this-week-in-react/?utm_source=thisweekinreact\&utm_medium=sponsor\&utm_campaign=sdk)**

フォーチュン500企業も採用するReactプロジェクト向けの完全なフォームソリューション。Reactアプリ内で強力なフォームを構築・実行するための使いやすいオープンソースコンポーネントを提供。詳細なドキュメントがあり、数分でセットアップ可能で、高度なカスタマイズが可能です。

* 強力なフォーム作成のためのビルダー
* フォームのデプロイとデータ収集のためのランナー
* 柔軟なフォームレイアウト（会話型、チャット型など）とスタイリング
* カスタム質問タイプで拡張可能
* 完全なドキュメント、例、デモ
* 外部依存なしでセルフホスティング可能
* 無料で開始、テスト、完成させることが可能

TWIR限定: [FormBuilder SDKライセンスを25%オフで入手](https://tripetto.com/sdk/this-week-in-react/?utm_source=thisweekinreact\&utm_medium=sponsor\&utm_campaign=sdk)。

***

## 📱 React-Native {#react-native}

[![React NativeでゼロバンドルサイズのReact Server Componentsは可能か？](/emails/issues/182/rn0kb.jpg)](https://twitter.com/Baconbrix/status/1780259340458340360)

🐦 [React NativeでゼロバンドルサイズのReact Server Componentsは可能か？](https://twitter.com/Baconbrix/status/1780259340458340360)

Evan Baconは「可能」と答え、サーバー駆動型React Nativeの未来を垣間見せてくれました。エキサイティングな時代が待っています！

***

* 💸 [PowerSync – シンプルな状態管理とリアルタイム反応性を備えたローカルファーストアプリを構築。既存アーキテクチャに非侵入的。](https://www.powersync.com/?utm_source=newsletter\&utm_medium=sponsorship\&utm_campaign=this-week-in-react)
* 🐦 [Brent Vatneの自動バッチ処理デモ](https://twitter.com/notbrent/status/1778266063832056285): 新アーキテクチャの動作を確認！
* 🐦 [破壊的アクション用の素敵なダイアログコンポーネントデモ](https://twitter.com/marceloterreiro/status/1779657639745798411)
* 🐦 [Ignite Cookbookサイトに複数の新レシピが追加](https://twitter.com/jamonholmgren/status/1778829659775676653): Supabase & PowerSync
* 🐦 [Vision ProでのRNを使った3Dレンダリング](https://twitter.com/o_kwasniewski/status/1780602815167283485)
* 👀 [rn.new - React Nativeプロジェクトを開始する便利な方法](https://rn.new)
* 🗓 [App.js Conf](https://appjs.co/?utm_source=thisweekinreact) - 🇵🇱 クラクフ - 5月22-24日。コード「TWIR」で[10%割引](https://ti.to/appjs/2024/discount/TWIR)。
* 📜 [React、Expo、ThreeJSで3Dアニメーションに形状とテクスチャを追加](https://www.themorrow.digital/blog/add-shapes-and-textures-to-3d-animations-with-react-expo-and-threejs): 先週、今後の3Dアニメーションライブラリについて書きましたが、もちろんRNでの3Dアプローチは既に存在します。この記事ではその1つを説明しています。
* 📜 [MetroのHttpキャッシュを実装する方法](https://andrei-calazans.com/posts/metro-http-cache/): MetaがRN開発者向けに集中キャッシュを使用していることをご存知ですか？ある開発者が何かをバンドルすると、別の開発者がそのキャッシュ結果を利用できます。この記事ではMetroでのリモートHTTPキャッシュの仕組みを説明しています。
* 📜 [React Strict DOM: React Nativeを使ったユニバーサルアプリの未来](https://blog.theodo.com/2024/04/react-strict-dom-react-native-web/)
* 📜 [忘れられたステータスバーデザインの技術](https://brainsandbeards.com/blog/2024-forgotten-art-of-status-bar-design/)
* 📜 [Gist - Expo 50.0.17を使ったAppleプライバシーマニフェスト](https://gist.github.com/catalinmiron/d2cabb835088d0342bc48030464ee615)
* 📜 [react-native-worklets-core 1.0](https://github.com/margelo/react-native-worklets-core/releases/tag/v1.0.0)
* 📦 [VisionCamera 4.0.0-beta.15 - Skiaフレームプロセッサの最初のベータ版](https://github.com/mrousavy/react-native-vision-camera/releases/tag/v4.0.0-beta.15)
* 📦 [react-native 0.74.0-rc.9](https://github.com/facebook/react-native/releases/tag/v0.74.0-rc.9): iOSプライバシーマニフェスト用テンプレートをビルドステップに追加
* 📦 [Unistyle 2.6 + 2.7 - tvOSとvisionOSのサポート追加](https://github.com/jpudysz/react-native-unistyles/releases)
* 📦 [RN Storybook v8.0.0-alpha.4](https://github.com/storybookjs/react-native/releases/tag/v8.0.0-alpha.4)
* 🎥 [Simon Grimm - 10の素晴らしいReact Nativeアニメーションライブラリ](https://www.youtube.com/watch?v=8CZy6DjDXK0)
* 🎥 [アプリのサイズは重要 | React Native最適化ショート2](https://www.youtube.com/watch?v=d2xlQRoea-8)
* 🎙️ [Rocket Ship 38 - Expo EASと100 Snakes with Jon Samp](https://share.transistor.fm/s/6896005f)

***

## 🔀 Other {#other}

* 📜 [第101回TC39会議のアップデート - Setメソッド、正規表現、Promise.try、isError、Signalsなど](https://dev.to/hemanth/updates-from-the-101th-tc39-meeting-1mm)
* 📜 [TypeScript機能の裏側: 型述語の推論](https://effectivetypescript.com/2024/04/16/inferring-a-type-predicate/)
* 📜 [Deno - JSRの構築方法](https://deno.com/blog/how-we-built-jsr)
* 📜 [GraphQLはおそらく必要ない](https://mxstbr.com/thoughts/graphql)
* 📜 [Node.jsコラボレーションサミット（2024年ロンドン）](https://nodejs.org/en/blog/events/collab-summit-2024-london)
* 📜 [Rspack & Webpackのツリーシェイキング徹底解説](https://github.com/orgs/web-infra-dev/discussions/17)
* 📦 [Safari Technology Preview 192 - CSSビュートランジション、URL.parse()](https://webkit.org/blog/15260/release-notes-for-safari-technology-preview-192/)
* 📦 [Rspack v0.6 - 組み込みCSS抽出プラグイン、新しいツリーシェイキングを有効化](https://www.rspack.dev/blog/announcing-0.6.html)
* 📦 [pnpm 9.0 - Node 16のサポート終了、ロックファイル形式と解決の改善](https://github.com/pnpm/pnpm/releases/tag/v9.0.0)
* 📦 [Biome 1.7 - ESLint/Prettier移行CLIの改善](https://biomejs.dev/blog/biome-v1-7/)
* 📦 [Effect 3.0 - API安定版](https://effect.website/blog/effect-3.0)
* 📦 [gql.tada 1.5 - 永続化オペレーション、Turboモード、新CLI](https://gql-tada.0no.co/devlog/2024-04-15)

***

## 🤭 Fun {#fun}

[![alt](/emails/issues/182/meme.jpg)](https://twitter.com/bndkt/status/1780615189202907426)

それではまた！👋